@Library('datacommons-jenkins-shared-library') _
buildAndDeploy(
    label: "cicd_microservice",
    parameterName: "BackendTag",
    codeRepoUrl: "https://github.com/cbiit/popsci-backend",
    checkoutDirectory: "popsci-backend",
	playbookRepoUrl: "https://github.com/CBIIT/pop-sci-deployments",
    playbookRepoBranch: "main",
    buildPlaybook: "ansible/build-bento-reference-microservice.yml",
    deployPlaybook: "ansible/deploy-backend-microservice.yml",
    inventory: "ansible/hosts",
    tier: "${params.Environment}",
    projectName: "${params.ProjectName}",
    slackSecretPath: "notification/slack",
    slackSecretName: "bento_slack_url",
    appVersionName: "BE_VERSION",
    deploymentRepoUrl: "https://github.com/CBIIT/pop-sci-deployments",
    deploymentCheckoutDirectory: "pop-sci-deployments",
    deploymentFile: "pop-sci-deployments/deployments.yaml",
    service: "backend",
    useDockerAgent: false,
    extraAnsibleVars: [
        subdomain: "popsci",
        domain_name: "bento-tools.org"
    ],
    checkoutDirectory: "workspace"
)